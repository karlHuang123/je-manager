/*!
 *  build: vue-admin-beautiful 
 *  vue-admin-beautiful author: chuzhixin 1204505056@qq.com 
 *  vue-admin-beautiful QQ Group(QQ群): 972435319、1139183756 
 *  time: 2023-8-18 17:41:10
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05d8e34c"],{"012f":function(e,t,n){"use strict";n.r(t);var i=n("f2bf"),a=function(e){return Object(i["I"])("data-v-33b34f17"),e=e(),Object(i["G"])(),e},c={class:"department-select"},s=a((function(){return Object(i["m"])("div",{class:"department-title"},"类别选择：",-1)})),r={key:0,class:"news-container"},o={class:"news-nav"},l=a((function(){return Object(i["m"])("div",{class:"main-title"},"作品列表",-1)})),u=["onClick"],d=Object(i["n"])("删除"),b=Object(i["n"])(" 添加新闻 "),m={class:"news-side"},f=a((function(){return Object(i["m"])("div",{class:"main-title"},"作品详情",-1)})),p={class:"news-main-input"},O=a((function(){return Object(i["m"])("div",{style:{width:"120px"}},"中文标题：",-1)})),j={class:"news-main-input"},h=a((function(){return Object(i["m"])("div",{style:{width:"120px"}},"英文标题：",-1)})),g={class:"news-main-input"},v=a((function(){return Object(i["m"])("div",{style:{width:"120px"}},"内容：",-1)})),w={class:"news-main-input"},y=a((function(){return Object(i["m"])("div",{style:{width:"120px"}},"项目信息：",-1)})),k={class:"news-main-input"},L=a((function(){return Object(i["m"])("div",{style:{width:"120px"}},"权重：",-1)})),C={class:"news-main-input"},I=a((function(){return Object(i["m"])("div",{style:{width:"120px"}},"时间：",-1)})),_={key:0},N=a((function(){return Object(i["m"])("div",{class:"image-title"},"作品图片集（第一张图片为首图）",-1)})),F={class:"add-new"},x=Object(i["n"])(" 添加作品图片 "),D={class:"add-news"},K=Object(i["n"])(" 提交 ");function W(e,t,n,a,W,U){var S=this,X=Object(i["N"])("a-select-option"),E=Object(i["N"])("a-select"),R=Object(i["N"])("a-button"),P=Object(i["N"])("a-popconfirm"),A=Object(i["N"])("PlusOutlined"),V=Object(i["N"])("a-input"),T=Object(i["N"])("a-textarea"),$=Object(i["N"])("a-input-number"),J=Object(i["N"])("DeleteOutlined"),M=Object(i["N"])("a-date-picker"),Y=Object(i["N"])("row-card");return Object(i["F"])(),Object(i["l"])("div",null,[Object(i["m"])("div",c,[s,Object(i["o"])(E,{"default-value":"空间",style:{width:"120px"},onChange:U.handleCategoryChange},{default:Object(i["X"])((function(){return[(Object(i["F"])(!0),Object(i["l"])(i["b"],null,Object(i["L"])(W.categoryList,(function(e,t){return Object(i["F"])(),Object(i["j"])(X,{key:t},{default:Object(i["X"])((function(){return[Object(i["n"])(Object(i["Q"])(e.label),1)]})),_:2},1024)})),128))]})),_:1},8,["onChange"])]),W.worksList&&0!==W.worksList.length?(Object(i["F"])(),Object(i["l"])("div",r,[Object(i["m"])("div",o,[l,(Object(i["F"])(!0),Object(i["l"])(i["b"],null,Object(i["L"])(W.worksList,(function(e,t){return Object(i["F"])(),Object(i["l"])("div",{class:Object(i["w"])(["side-element",{active:S.tempKey===t}]),key:e?e._id:t},[Object(i["m"])("div",{class:"news-title",onClick:function(e){return U.changeItem(t)}},Object(i["Q"])(e.title_cn),9,u),Object(i["o"])(P,{title:"确定删除吗？",onConfirm:function(n){return U.deleteWorksFun(e._id,t)}},{default:Object(i["X"])((function(){return[Object(i["o"])(R,{style:{"margin-right":"10px"},type:"danger"},{default:Object(i["X"])((function(){return[d]})),_:1})]})),_:2},1032,["onConfirm"])],2)})),128)),Object(i["m"])("div",null,[Object(i["o"])(R,{type:"primary",onClick:U.addWorks},{default:Object(i["X"])((function(){return[Object(i["o"])(A),b]})),_:1},8,["onClick"])])]),Object(i["m"])("div",m,[f,Object(i["m"])("div",p,[O,Object(i["o"])(V,{value:W.worksList[W.tempKey].title_cn,"onUpdate:value":t[0]||(t[0]=function(e){return W.worksList[W.tempKey].title_cn=e})},null,8,["value"])]),Object(i["m"])("div",j,[h,Object(i["o"])(V,{value:W.worksList[W.tempKey].title_en,"onUpdate:value":t[1]||(t[1]=function(e){return W.worksList[W.tempKey].title_en=e})},null,8,["value"])]),Object(i["m"])("div",g,[v,Object(i["o"])(T,{value:W.worksList[W.tempKey].body,"onUpdate:value":t[2]||(t[2]=function(e){return W.worksList[W.tempKey].body=e}),size:"large"},null,8,["value"])]),Object(i["m"])("div",w,[y,Object(i["o"])(T,{value:W.worksList[W.tempKey].project_info,"onUpdate:value":t[3]||(t[3]=function(e){return W.worksList[W.tempKey].project_info=e}),size:"large"},null,8,["value"])]),Object(i["m"])("div",k,[L,Object(i["o"])($,{value:W.worksList[W.tempKey].weight,"onUpdate:value":t[4]||(t[4]=function(e){return W.worksList[W.tempKey].weight=e})},null,8,["value"])]),Object(i["m"])("div",C,[I,W.worksList[W.tempKey].created_at?(Object(i["F"])(),Object(i["l"])("div",_,[Object(i["n"])(Object(i["Q"])(U.formatDate(W.worksList[W.tempKey].created_at))+" ",1),Object(i["m"])("span",{class:"delete-date",onClick:t[5]||(t[5]=function(){return U.deleteDate&&U.deleteDate.apply(U,arguments)})},[Object(i["o"])(J)])])):(Object(i["F"])(),Object(i["j"])(M,{key:1,onChange:U.createDateChange},null,8,["onChange"]))]),N,(Object(i["F"])(!0),Object(i["l"])(i["b"],null,Object(i["L"])(W.worksList[W.tempKey].images,(function(e,t){return Object(i["F"])(),Object(i["l"])("div",{class:"news-card-list-container",key:t},[Object(i["o"])(Y,{newsDetail:e,index:t,onChanged:U.newsDetailChanged,onUpdateImage:U.handleImageUpdated},null,8,["newsDetail","index","onChanged","onUpdateImage"])])})),128)),Object(i["m"])("div",F,[Object(i["o"])(R,{style:{"margin-right":"10px"},onClick:U.addNewImage,type:"primary"},{default:Object(i["X"])((function(){return[Object(i["o"])(A),x]})),_:1},8,["onClick"])]),Object(i["m"])("div",D,[Object(i["o"])(R,{style:{"margin-right":"10px"},onClick:U.submitWorks,type:"primary"},{default:Object(i["X"])((function(){return[K]})),_:1},8,["onClick"])])])])):Object(i["k"])("",!0)])}var U=n("5530"),S=(n("a434"),n("5502")),X=n("dc81"),E=n("47ce"),R=n("b1c8"),P=n("c1df"),A=n.n(P),V={name:"Works",components:{RowCard:X["default"],PlusOutlined:E["a"],DeleteOutlined:R["a"]},data:function(){return{show:!1,worksList:[],tempKey:0,tempObject:{title_cn:"默认标题",title_en:"default title",body:"",project_info:"",weight:0,category:"space",created_at:"",images:[{url:"",comment:""}]},categoryList:[{label:"空间",value:"space"},{label:"平面",value:"graphic"},{label:"产品",value:"product"}],category:"space"}},methods:Object(U["a"])(Object(U["a"])({},Object(S["b"])({getWorksList:"ateliter/getWorksList",saveWorks:"ateliter/saveWorks",deleteWorks:"ateliter/deleteWorks"})),{},{initWorksList:function(){this.worksList=[];var e={title_cn:"默认标题",title_en:"default title",body:"",project_info:"",weight:0,category:this.category,created_at:"",images:[{url:"",comment:""}]};this.worksList.push(e),this.tempObject=this.worksList[0]},formatDate:function(e){return A()(e).format("YYYY-MM-DD")},changeItem:function(e){this.tempKey=e,this.tempObject=this.worksList[e]},handleCategoryChange:function(e){this.category=this.categoryList[e].value,this.getWorksListFun(this.value)},newsDetailChanged:function(e){this.worksList[this.tempKey].images[e.index]=e.image,this.tempObject=this.worksList[this.tempKey]},createDateChange:function(e,t){this.worksList[this.tempKey].created_at=t},handleImageUpdated:function(e){this.worksList[this.tempKey].images.splice(e,1)},deleteDate:function(){this.worksList[this.tempKey].created_at=""},deleteWorksFun:function(e,t){var n=this;e?this.deleteWorks({data:{_id:e},callback:function(e){e&&n.getWorksListFun()}}):(this.tempKey=t>0?t-1:t+1,this.worksList.splice(t,1))},addWorks:function(){var e={title_cn:"默认标题",title_en:"default title",body:"",project_info:"",weight:0,category:this.category,created_at:"",images:[{url:"",comment:""}]};this.worksList.push(e),this.tempKey=this.worksList.length-1},addNewImage:function(){var e={url:"",comment:""};this.worksList[this.tempKey].images.push(e)},submitWorks:function(){var e=this;this.saveWorks({data:this.worksList[this.tempKey],callback:function(t){t&&(e.$message.success("提交成功。"),e.getWorksListFun())}})},getWorksListFun:function(){var e=this;this.getWorksList({category:this.category,callback:function(t){t.data&&"number"===typeof t.data.length&&0!==t.data.length?(e.worksList=t.data,e.tempKey=0,e.tempObject=e.worksList[e.tempKey]):e.initWorksList()}})}}),mounted:function(){this.initWorksList(),this.getWorksListFun()}},T=(n("7a90"),n("6b0d")),$=n.n(T);const J=$()(V,[["render",W],["__scopeId","data-v-33b34f17"]]);t["default"]=J},"167a":function(e,t,n){},"27b6":function(e,t,n){"use strict";n("c8ca")},"408a":function(e,t,n){var i=n("e330");e.exports=i(1..valueOf)},6666:function(e,t,n){"use strict";n("167a")},"7a90":function(e,t,n){"use strict";n("ecc2")},a9a7:function(e,t,n){"use strict";n.r(t);var i=n("f2bf"),a={key:0},c=Object(i["m"])("div",{class:"ant-upload-text"},"Upload",-1),s=["src"];function r(e,t,n,r,o,l){var u=Object(i["N"])("PlusOutlined"),d=Object(i["N"])("a-upload"),b=Object(i["N"])("a-modal"),m=Object(i["N"])("a-tooltip");return Object(i["F"])(),Object(i["j"])(m,{placement:"topLeft",title:"支持.jpg, .png, .gif格式"},{default:Object(i["X"])((function(){return[Object(i["m"])("div",null,[Object(i["o"])(d,{"list-type":"picture-card",class:"avatar-uploader",onChange:e.onImageChange,fileList:e.fileList,customRequest:e.uploadImage,accept:".jpg,.png,.gif",onPreview:e.handlePreview,onRemove:e.deleteImage},{default:Object(i["X"])((function(){return[e.fileList.length<e.length?(Object(i["F"])(),Object(i["l"])("div",a,[Object(i["o"])(u),c])):Object(i["k"])("",!0)]})),_:1},8,["onChange","fileList","customRequest","onPreview","onRemove"]),Object(i["o"])(b,{visible:e.previewVisible,footer:null,onCancel:e.handleCancel},{default:Object(i["X"])((function(){return[Object(i["m"])("img",{alt:"example",style:{width:"100%"},src:e.previewImage},null,8,s)]})),_:1},8,["visible","onCancel"])])]})),_:1})}var o=n("1da1"),l=n("5530"),u=(n("96cf"),n("d3b7"),n("a9e3"),n("25f0"),n("5502")),d=n("47ce");function b(e){return new Promise((function(t,n){var i=new FileReader;i.readAsDataURL(e),i.onload=function(){return t(i.result)},i.onerror=function(e){return n(e)}}))}var m=Object(i["p"])({props:{value:{type:String},imageIndex:{type:Number,default:0},length:{type:Number,default:1}},components:{PlusOutlined:d["a"]},data:function(){return{fileList:[],tempImage:"",previewVisible:!1,previewImage:null}},methods:Object(l["a"])(Object(l["a"])({},Object(u["b"])({uploadFile:"general/uploadFile"})),{},{onImageChange:function(e){this.fileList=e.fileList},uploadImage:function(e){var t=new FormData;t.append("file",e.file),this.saveImage(t)},saveImage:function(e){var t=this;this.uploadFile({data:e,callback:function(e){t.tempImage=e.data,t.$message.success("上传成功！"),t.fileList[0].status="done",t.$emit("fileUploaded",e.data)}})},deleteImage:function(){this.$emit("fileUploaded","")},handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.url||e.preview){n.next=4;break}return n.next=3,b(e.originFileObj);case 3:e.preview=n.sent;case 4:t.previewImage=e.url||e.preview,t.previewVisible=!0;case 6:case"end":return n.stop()}}),n)})))()}}),watch:{value:{handler:function(e){this.fileList=e?[{url:e,uid:this.imageIndex.toString()}]:[]},deep:!0,immediate:!0}},mounted:function(){this.value&&(this.fileList=[{url:this.value,uid:this.imageIndex.toString()}])}}),f=(n("27b6"),n("6b0d")),p=n.n(f);const O=p()(m,[["render",r]]);t["default"]=O},a9e3:function(e,t,n){"use strict";var i=n("83ab"),a=n("da84"),c=n("e330"),s=n("94ca"),r=n("6eeb"),o=n("1a2d"),l=n("7156"),u=n("3a9b"),d=n("d9b5"),b=n("c04e"),m=n("d039"),f=n("241c").f,p=n("06cf").f,O=n("9bf2").f,j=n("408a"),h=n("58a8").trim,g="Number",v=a[g],w=v.prototype,y=a.TypeError,k=c("".slice),L=c("".charCodeAt),C=function(e){var t=b(e,"number");return"bigint"==typeof t?t:I(t)},I=function(e){var t,n,i,a,c,s,r,o,l=b(e,"number");if(d(l))throw y("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=h(l),t=L(l,0),43===t||45===t){if(n=L(l,2),88===n||120===n)return NaN}else if(48===t){switch(L(l,1)){case 66:case 98:i=2,a=49;break;case 79:case 111:i=8,a=55;break;default:return+l}for(c=k(l,2),s=c.length,r=0;r<s;r++)if(o=L(c,r),o<48||o>a)return NaN;return parseInt(c,i)}return+l};if(s(g,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var _,N=function(e){var t=arguments.length<1?0:v(C(e)),n=this;return u(w,n)&&m((function(){j(n)}))?l(Object(t),n,N):t},F=i?f(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),x=0;F.length>x;x++)o(v,_=F[x])&&!o(N,_)&&O(N,_,p(v,_));N.prototype=w,w.constructor=N,r(a,g,N)}},c8ca:function(e,t,n){},dc81:function(e,t,n){"use strict";n.r(t);var i=n("f2bf"),a=function(e){return Object(i["I"])("data-v-ec506a8e"),e=e(),Object(i["G"])(),e},c={class:"card-container"},s={class:"card-image"},r={class:"card-text"},o={class:"card-input"},l=a((function(){return Object(i["m"])("div",{style:{width:"120px"}},"注释：",-1)})),u={class:"btn-group"},d=Object(i["n"])("删除");function b(e,t,n,a,b,m){var f=Object(i["N"])("image-upload"),p=Object(i["N"])("a-input"),O=Object(i["N"])("a-button"),j=Object(i["N"])("a-popconfirm");return Object(i["F"])(),Object(i["l"])("div",c,[Object(i["m"])("div",s,[Object(i["o"])(f,{value:b.newsDetailCard.url,onFileUploaded:m.handleFileUpload},null,8,["value","onFileUploaded"])]),Object(i["m"])("div",r,[Object(i["m"])("div",o,[l,Object(i["o"])(p,{value:b.newsDetailCard.comment,"onUpdate:value":t[0]||(t[0]=function(e){return b.newsDetailCard.comment=e}),onChange:m.handleCommentChanged,disabled:0===n.index},null,8,["value","onChange","disabled"])]),Object(i["m"])("div",u,[Object(i["o"])(j,{title:"确定删除吗？",onConfirm:m.deleteImage},{default:Object(i["X"])((function(){return[Object(i["o"])(O,{type:"danger"},{default:Object(i["X"])((function(){return[d]})),_:1})]})),_:1},8,["onConfirm"])])])])}n("a9e3"),n("e9c4");var m=n("a9a7"),f={name:"RowCardWorks",props:{newsDetail:{type:Object},index:{type:Number}},components:{ImageUpload:m["default"]},data:function(){return{newsDetailCard:{url:"",comment:""}}},methods:{handleCommentChanged:function(e){console.log(e),this.$emit("changed",{image:this.newsDetailCard,index:this.index})},handleFileUpload:function(e){this.newsDetailCard.url="https://www.group-je.com/file/"+e,this.$emit("changed",{image:this.newsDetailCard,index:this.index})},deleteImage:function(){this.$emit("updateImage",this.index)}},watch:{newsDetail:{handler:function(e){e&&(this.newsDetailCard=JSON.parse(JSON.stringify(e)))},deep:!0,immediate:!0}},mounted:function(){this.newsDetailCard=JSON.parse(JSON.stringify(this.newsDetail))}},p=(n("6666"),n("6b0d")),O=n.n(p);const j=O()(f,[["render",b],["__scopeId","data-v-ec506a8e"]]);t["default"]=j},ecc2:function(e,t,n){}}]);